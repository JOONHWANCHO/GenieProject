<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace = "com.genie.myapp.dao.UserDAO">

	<select id = "idCheck" resultType="int">
		select count(user_id) cnt from user where user_id =#{user_id}; 
	</select>

    <insert id = "UserWrite">
		insert into user(user_id, user_pwd, user_name, user_phone_num, user_email, user_zipcode, user_addr, user_detailaddr, user_gender)
		values(#{user_id}, #{user_pwd}, #{user_name}, #{user_phone_num}, #{user_email}, #{user_zipcode}, #{user_addr}, #{user_detailaddr}, #{user_gender})
	</insert>

	<select id = "loginOk" resultType = "UserVO">
		select user_id, user_name 
		from user 
		where user_id=#{user_id} and user_pwd=#{user_pwd}
	</select>

    <update id ="UserEditOk">
		update user 
		set user_phone_num=#{user_phone_num}, user_email=#{user_email} 
		where user_id =#{user_id}
	</update>

	<update id ="PwdEditOk">
		update user 
		set user_pwd=#{user_pwd2}  
		where user_id=#{user_id} and user_pwd=#{user_pwd}
	</update>
	
    <select id = "getUser" resultType = "UserVO">
		select user_id, user_name, user_phone_num, user_email, user_zipcode, user_addr, user_detailaddr
		from user
		where user_id=#{user_id}
	</select>

	<select id="FindId" resultType="String">
    	select user_id
    	from user
    	where user_email =#{user_email} 
	</select>

	<select id="emailCheck" resultType="String">
		select	1
		from user 
		where exist(
			select 1
			from user
			where user_name = #{user_name} 
			ane user_email = #{user_email}
		) 
	</select>



</mapper>